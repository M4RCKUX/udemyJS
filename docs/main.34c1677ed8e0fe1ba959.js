(()=>{"use strict";function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=t((function e(t,a,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.txt=t,this.hecho=a||!1,this.id=i||(new Date).getTime(),this.fechaInicio=n||new Date}));function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lista={}}var t,a,n;return t=e,(a=[{key:"add",value:function(e){this.lista[e.id]=e}},{key:"eliminar",value:function(e){delete this.lista[e]}},{key:"get",value:function(e){return this.lista[e]}},{key:"toggle",value:function(e){this.lista[e].hecho=!this.lista[e].hecho}},{key:"eliminarCompletados",value:function(){for(var e in this.lista)this.lista[e].hecho&&delete this.lista[e]}}])&&i(t.prototype,a),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,(i=[{key:"loadListaTareas",value:function(){var e=new n,t=JSON.parse(localStorage.getItem("listaTareas"));if(console.log(t),t)for(var i in t)e.add(new a(t[i].txt,t[i].hecho,t[i].id,t[i].fechaInicio));return e}},{key:"saveListaTareas",value:function(e){localStorage.setItem("listaTareas",JSON.stringify(e.lista))}}])&&r(t.prototype,i),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.newTodo=document.querySelector(".new-todo"),this.todoList=document.querySelector(".todo-list"),this.todoCount=document.querySelector(".todo-count").firstChild,this.filters=document.querySelector(".filters"),this.clearCompleted=document.querySelector(".clear-completed"),this.setControls()}var t,a,i;return t=e,(a=[{key:"addTarea",value:function(e){var t=this,a=document.createElement("li");a.id="id".concat(e.id),e.hecho&&a.classList.add("completed"),a.innerHTML='\n            <div class="view">\n                <input class="toggle" type="checkbox" '.concat(e.hecho?"checked":""," >\n                <label>").concat(e.txt,'</label>\n                <button class="destroy"></button>\n            </div>'),a.querySelector(".destroy").addEventListener("click",(function(a){return t.app.deleteTarea(e.id)})),a.querySelector(".toggle").addEventListener("click",(function(a){return t.app.toggleTarea(e.id)})),this.todoList.append(a),this.updatePendientes()}},{key:"deleteTarea",value:function(e){document.querySelector("#id".concat(e)).remove(),this.updatePendientes()}},{key:"toogleTarea",value:function(e){var t=document.querySelector("#id".concat(e));t.classList.contains("completed")?t.classList.remove("completed"):t.classList.add("completed"),this.updatePendientes()}},{key:"refresh",value:function(e){for(var t in this.todoList.innerHTML="",e.lista)this.addTarea(e.lista[t]);this.updatePendientes()}},{key:"updatePendientes",value:function(){var e=this.todoList.querySelectorAll("li"),t=0;e.forEach((function(e){return t+=e.classList.contains("completed")?0:1})),this.todoCount.innerText=t}},{key:"filtrar",value:function(e){this.todoList.querySelectorAll("li").forEach((function(t){switch(t.classList.remove("hidden"),e){case"Completados":t.classList.contains("completed")||t.classList.add("hidden");break;case"Pendientes":t.classList.contains("completed")&&t.classList.add("hidden")}}))}},{key:"setControls",value:function(){var e=this;this.newTodo.addEventListener("change",(function(t){var a=t.target.value;""!=a&&(e.app.addTarea(a),t.target.value="")})),this.clearCompleted.addEventListener("click",(function(t){return e.app.clearCompleted()})),this.filters.addEventListener("click",(function(t){e.filters.querySelectorAll(".filtro").forEach((function(e){return e.classList.remove("selected")})),t.target.classList.add("selected"),e.filtrar(t.target.innerText)}))}}])&&s(t.prototype,a),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=new o,this.listaTareas=this.model.loadListaTareas(),this.view=new l(this),this.view.refresh(this.listaTareas)}var t,i,n;return t=e,(i=[{key:"addTarea",value:function(e){var t=new a(e);this.listaTareas.add(t),this.view.addTarea(t),this.model.saveListaTareas(this.listaTareas)}},{key:"toggleTarea",value:function(e){this.listaTareas.toggle(e),this.view.toogleTarea(e),this.model.saveListaTareas(this.listaTareas)}},{key:"deleteTarea",value:function(e){this.listaTareas.eliminar(e),this.view.deleteTarea(e),this.model.saveListaTareas(this.listaTareas)}},{key:"clearCompleted",value:function(){this.listaTareas.eliminarCompletados(),this.view.refresh(this.listaTareas),this.model.saveListaTareas(this.listaTareas)}}])&&c(t.prototype,i),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())})();